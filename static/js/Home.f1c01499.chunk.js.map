{"version":3,"sources":["../node_modules/deepmerge/dist/cjs.js","components/home.js"],"names":["isMergeableObject","value","isNonNullObject","stringValue","Object","prototype","toString","call","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","Symbol","for","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","val","Array","isArray","defaultArrayMerge","target","source","concat","map","element","getKeys","keys","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","object","property","_","mergeObject","destination","forEach","key","hasOwnProperty","propertyIsUnsafe","customMerge","getMergeFunction","arrayMerge","sourceIsArray","all","array","Error","reduce","prev","next","deepmerge_1","module","exports","TimeSeriesExplorer","lazy","MapExplorer","Actions","Table","Minigraph","Footer","Level","Home","props","useState","stateCode","districtName","regionHighlighted","setRegionHighlighted","anchor","setAnchor","mapStatistic","setMapStatistic","today","format","Date","date","setDate","data","setData","timeseries","setTimeseries","useEffect","pastTimeseries","axios","get","futureTimeseries","then","spread","responses","merge","ret","d","response","st","homeRightElement","useRef","isVisible","useIsVisible","once","stateCodes","Set","MAP_META","sort","Fragment","name","content","className","fallback","style","minHeight","dates","reverse","ref"],"mappings":"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","file":"static/js/Home.f1c01499.chunk.js","sourcesContent":["'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","import {MAP_META} from '../constants';\n\nimport axios from 'axios';\nimport {format} from 'date-fns';\nimport merge from 'deepmerge';\nimport React, {useState, useRef, lazy, Suspense, useEffect} from 'react';\nimport {Helmet} from 'react-helmet';\nimport {useIsVisible} from 'react-is-visible';\n\nimport 'intersection-observer';\n\nconst TimeSeriesExplorer = lazy(() =>\n  import('./timeseriesexplorer' /* webpackChunkName: \"TimeSeriesExplorer\" */)\n);\n\nconst MapExplorer = lazy(() =>\n  import('./mapexplorer' /* webpackChunkName: \"MapExplorer\" */)\n);\n\nconst Actions = lazy(() =>\n  import('./actions' /* webpackChunkName: \"Actions\" */)\n);\n\nconst Table = lazy(() => import('./table' /* webpackChunkName: \"Table\" */));\n\nconst Minigraph = lazy(() =>\n  import('./minigraph' /* webpackChunkName: \"Minigraph\" */)\n);\n\nconst Footer = lazy(() => import('./footer' /* webpackChunkName: \"Footer\" */));\n\nconst Level = lazy(() => import('./level' /* webpackChunkName: \"Level\" */));\n\nfunction Home(props) {\n  const [regionHighlighted, setRegionHighlighted] = useState({\n    stateCode: 'TT',\n    districtName: null,\n  });\n\n  const [anchor, setAnchor] = useState(null);\n  const [mapStatistic, setMapStatistic] = useState('active');\n  const today = format(new Date(), 'yyyy-MM-dd');\n  const [date, setDate] = useState(today);\n  const [data, setData] = useState({});\n  const [timeseries, setTimeseries] = useState({});\n\n  useEffect(() => {\n    const pastTimeseries = axios.get(\n      'https://api.covid19india.org/v3/min/timeseries.min.json'\n    );\n    const futureTimeseries = axios.get(\n      'https://vics-core.github.io/covid-api/predictions.json'\n    );\n    axios.all([pastTimeseries, futureTimeseries]).then(\n      axios.spread((...responses) => {\n        setTimeseries(merge(responses[1].data, responses[0].data));\n      })\n    );\n  }, []);\n\n  useEffect(() => {\n    let ret = {};\n    if (date <= today) {\n      const d = date === today ? '' : `-${date}`;\n      axios\n        .get(`https://api.covid19india.org/v3/min/data${d}.min.json`)\n        .then((response) => {\n          ret = response.data;\n          setData(ret);\n        });\n      return;\n    }\n    for (const st in timeseries) {\n      if (timeseries.hasOwnProperty(st)) {\n        ret[st] = timeseries[st][date];\n      }\n    }\n    setData(ret);\n  }, [date, timeseries, today]);\n\n  const homeRightElement = useRef();\n  const isVisible = useIsVisible(homeRightElement, {once: true});\n\n  const stateCodes = [\n    'TT',\n    ...[\n      ...new Set([\n        ...Object.keys(MAP_META).filter((stateCode) => stateCode !== 'TT'),\n        ...Object.keys(data || {}).filter((stateCode) => stateCode !== 'TT'),\n      ]),\n    ].sort(),\n  ];\n\n  return (\n    <React.Fragment>\n      <Helmet>\n        <title>Coronavirus Outbreak in India - covid19india.org</title>\n        <meta\n          name=\"title\"\n          content=\"Coronavirus Outbreak in India: Latest Map and Case Count\"\n        />\n      </Helmet>\n\n      <div className=\"Home\">\n        <div className=\"home-left\">\n          <div className=\"header\">\n            <Suspense fallback={<div />}></Suspense>\n\n            {timeseries['TT'] && (\n              <Suspense fallback={<div style={{minHeight: '56px'}} />}>\n                <Actions\n                  {...{\n                    setDate,\n                    dates: Object.keys(timeseries['TT']).reverse(),\n                    date,\n                  }}\n                />\n              </Suspense>\n            )}\n          </div>\n\n          {data['TT'] && (\n            <Suspense fallback={<div />}>\n              <Level data={data['TT']} />\n            </Suspense>\n          )}\n\n          <Suspense fallback={<div />}>\n            {timeseries['TT'] && (\n              <Minigraph timeseries={timeseries['TT']} {...{date}} />\n            )}\n          </Suspense>\n\n          <Suspense fallback={<div />}>\n            {data['TT'] && (\n              <Table {...{data, regionHighlighted, setRegionHighlighted}} />\n            )}\n          </Suspense>\n        </div>\n\n        <div className=\"home-right\" ref={homeRightElement}>\n          {isVisible && (\n            <React.Fragment>\n              {data && (\n                <Suspense fallback={<div />}>\n                  <MapExplorer\n                    stateCode=\"TT\"\n                    {...{data}}\n                    {...{mapStatistic, setMapStatistic}}\n                    {...{regionHighlighted, setRegionHighlighted}}\n                    {...{anchor, setAnchor}}\n                  />\n                </Suspense>\n              )}\n\n              {timeseries['TT'] && (\n                <Suspense fallback={<div />}>\n                  <TimeSeriesExplorer\n                    timeseries={timeseries[regionHighlighted.stateCode]}\n                    {...{date, stateCodes}}\n                    {...{regionHighlighted, setRegionHighlighted}}\n                    {...{anchor, setAnchor}}\n                  />\n                </Suspense>\n              )}\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n      {isVisible && (\n        <Suspense fallback={<div />}>\n          <Footer />\n        </Suspense>\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default Home;\n"],"sourceRoot":""}